<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Captain of the Sea - RPG Battleship</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <audio id="bg-music" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-17.mp3"></audio>
    <audio id="sfx-hit" src="https://actions.google.com/sounds/v1/explosions/explosion_far.ogg"></audio>
    <audio id="sfx-miss" src="https://actions.google.com/sounds/v1/water/small_splash.ogg"></audio>

    <div id="game-window">
        <section id="menu-screen" class="screen active">
            <div class="logo-container">
                <h1 class="main-title">CAPTAIN OF THE SEA</h1>
                <p class="game-subtitle">‚öì PRZYGODA, S≈ÅAWA I STAL ‚öì</p>
            </div>
            
            <div class="main-menu-nav">
                <button class="menu-btn" onclick="goToScreen('creator-screen')">NOWA GRA</button>
                <button class="menu-btn" onclick="loadGame()">WCZYTAJ GRƒò</button>
                <button class="menu-btn" onclick="goToScreen('settings-screen')">USTAWIENIA</button>
            </div>
            <div class="footer-note">Wersja 1.1 - RPG Engine Ready</div>
        </section>

        <section id="creator-screen" class="screen">
            <h2 class="section-title">STW√ìRZ SWOJƒÑ LEGENDƒò</h2>
            <div class="creator-flex">
                <div class="avatar-box">
                    <div id="visual-preview">
                        <div id="hair-layer"></div>
                        <div id="head-layer"></div>
                        <div id="clothes-layer"></div>
                    </div>
                </div>
                
                <div class="creator-form">
                    <div class="input-block">
                        <label>IMIƒò KAPITANA:</label>
                        <input type="text" id="p-name" placeholder="Wpisz imiƒô..." maxlength="12">
                    </div>
                    
                    <div class="input-block">
                        <label>P≈ÅEƒÜ:</label>
                        <select id="p-gender">
                            <option value="M">Mƒô≈ºczyzna</option>
                            <option value="K">Kobieta</option>
                        </select>
                    </div>

                    <div class="input-block">
                        <label>KOLOR W≈ÅOS√ìW:</label>
                        <input type="color" id="p-hair-color" value="#4b2c20" oninput="liveUpdateVisuals()">
                    </div>

                    <div class="input-block">
                        <label>UBI√ìR:</label>
                        <input type="color" id="p-cloth-color" value="#7b1113" oninput="liveUpdateVisuals()">
                    </div>

                    <button class="action-btn-gold" onclick="startAdventure()">ROZPOCZNIJ PROLOG</button>
                    <button class="action-btn-back" onclick="goToScreen('menu-screen')">POWR√ìT</button>
                </div>
            </div>
        </section>

        <section id="prologue-screen" class="screen">
            <div class="parchment-scroll">
                <div class="scroll-content">
                    <h3>ROZDZIA≈Å 1: KATASTROFA</h3>
                    <div id="story-text" class="typing-effect"></div>
                </div>
                <button class="action-btn-gold" onclick="goToScreen('stats-screen')">KONTYNUUJ</button>
            </div>
        </section>

        <section id="stats-screen" class="screen">
            <div class="stats-dashboard">
                <div class="player-header">
                    <h2 id="disp-name">KAPITAN</h2>
                    <div class="lvl-tag">POZIOM <span id="disp-lvl">1</span></div>
                </div>
                
                <div class="stats-main">
                    <div class="resources">
                        <div class="res-item">üí∞ Z≈ÅOTO: <span id="disp-gold">0</span></div>
                        <div class="res-item">‚ú® PUNKTY UMIEJƒòTNO≈öCI: <span id="disp-pts">5</span></div>
                    </div>

                    <div class="skills-tree">
                        <div class="skill-card">
                            <div class="skill-info">
                                <strong>üëÅÔ∏è PERCEPCJA</strong>
                                <span>Widzisz wiƒôcej p√≥l po trafieniu.</span>
                            </div>
                            <div class="skill-action">
                                <button onclick="upgradeSkill('per')">+</button>
                                <span id="v-per">0</span>
                            </div>
                        </div>

                        <div class="skill-card">
                            <div class="skill-info">
                                <strong>üçÄ SZCZƒò≈öCIE</strong>
                                <span>Wr√≥g czƒô≈õciej pud≈Çuje.</span>
                            </div>
                            <div class="skill-action">
                                <button onclick="upgradeSkill('luc')">+</button>
                                <span id="v-luc">0</span>
                            </div>
                        </div>

                        <div class="skill-card">
                            <div class="skill-info">
                                <strong>üõ†Ô∏è NAPRAWA</strong>
                                <span>Zmniejsza obra≈ºenia statk√≥w.</span>
                            </div>
                            <div class="skill-action">
                                <button onclick="upgradeSkill('rep')">+</button>
                                <span id="v-rep">0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="footer-actions">
                    <button class="action-btn-gold" onclick="prepareBattle()">WYRUSZ NA MORZE</button>
                    <button class="save-btn" onclick="saveGame()">ZAPISZ STAN GRY</button>
                </div>
            </div>
        </section>

        <section id="setup-screen" class="screen">
            <h2>PRZYGOTOWANIE FLOTY</h2>
            <div class="setup-grid-container">
                <div id="setup-board" class="battle-grid"></div>
                <div class="setup-tools">
                    <button id="rotate-btn" class="tool-btn">OBR√ìƒÜ: POZIOM</button>
                    <div id="dock-status">Rozmie≈õƒá statki (5, 4, 3, 3, 2)</div>
                    <button id="battle-start-btn" class="action-btn-gold" style="display:none;" onclick="launchBattle()">DO BOJU!</button>
                </div>
            </div>
        </section>

        <section id="battle-screen" class="screen">
            <div class="battle-hud">
                <div class="hp-bar player-hp">TWOJA FLOTA: <span id="hp-p">100%</span></div>
                <div id="turn-indicator" class="turn-label">TWOJA KOLEJ</div>
                <div class="hp-bar enemy-hp">PIRACI: <span id="hp-e">100%</span></div>
            </div>
            
            <div class="battle-fields">
                <div class="field-wrap">
                    <p>TWOJE MORZE</p>
                    <div id="p-field" class="battle-grid"></div>
                </div>
                <div class="field-wrap">
                    <p>RADAR WROGA</p>
                    <div id="e-field" class="battle-grid"></div>
                </div>
            </div>
            <div id="battle-msg" class="event-log">Wypatruj maszt√≥w na horyzoncie...</div>
        </section>

        <section id="settings-screen" class="screen">
            <h2 class="section-title">USTAWIENIA</h2>
            <div class="settings-list">
                <div class="setting-row">
                    <span>MUZYKA I SFX:</span>
                    <button id="audio-toggle" onclick="toggleAudioSystem()">W≈ÅƒÑCZONE</button>
                </div>
                <div class="setting-row">
                    <span>JƒòZYK:</span>
                    <button>POLSKI</button>
                </div>
            </div>
            <button class="action-btn-back" onclick="goToScreen('menu-screen')">POWR√ìT</button>
        </section>
    </div>

    <script src="script.js"></script>
</body>
</html>
